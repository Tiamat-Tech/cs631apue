<!DOCTYPE HTML>

<HTML lang="en">
<HEAD>

  <TITLE>CS631 -- Advanced Programming in the UNIX Environment</TITLE>
  <link rel="stylesheet" type="text/css" href="index.css">

</HEAD>

<BODY>
  <TABLE style="border: 2px double">
    <TR>
      <TD style="padding: 10px; vertical-align: top">
        <H2>CS631 -- Advanced Programming in the UNIX Environment - HW#3</H2>

        <H3>HW#3: implement 'command(3)'</H3>

        <H4>Summary</H4>
	<p>The objective of this assignment is for you apply the first
	lessons of Interprocess Communication from class and to write a
	function that requires communication between two related processes
	using the <code>pipe(2)</code> system call.
	</p>
	<h4>Problem assignment</h4>
	<p>
          Write a library function <code>command(3)</code> as described in
          <a href="command.pdf">this manual page</a>.  Example
          usage:</p>

          <blockquote><pre>int
main() {
	char out[BUFSIZ] = { 0 }, err[BUFSIZ] = { 0 };
	if (command("ls -l", out, BUFSIZ-1, err, BUFSIZ-1) == -1) {
		perror("command");
		exit(EXIT_FAILURE);
	}
	out[BUFSIZ-1] = '\0';
	err[BUFSIZ-1] = '\0';
	printf("stdout:\n%s\n", out);
	printf("stderr:\n%s\n", err);
	return EXIT_SUCCESS;
}</pre></blockquote>

        <p>As usual, your program will be well formatted,
          properly commented (where necessary!), be able to be
          compiled without any warnings using the '-Wall
          -Werror -Wextra' flags on a NetBSD 10.x system, not generate
          any diagnostic messages or superflous output, generate
          meaningful error messages to stderr, etc. etc.
        </p>

        <p>
          Note: your function here is intended to be
          suitable for inclusion in a library.  Consider
          how this impacts some of your choices.
        </p>

	<h4>Hints</h4>
	<p>Review the code examples from <a href="lecture08.pdf">Lecture 08</a>.
          Also take a look at the source for the <code>system(3)</code> library
          function, from which you may take code for this assignment.</p>

	<p>You will need to:</p>
        <ul>
          <li>create two pipes, one for <code>stdout</code>, one for
          <code>stderr</code> of the command to execute</li>
          <li>ignore <code>SIGINT</code>, <code>SIGQUIT</code>; block
          <code>SIGCHLD</code></li>
          <li><code>fork(2)</code> a new process</li>
          <li><code>dup2(2)</code> the respective file descriptors
          onto the write-ends of the pipes</li>
          <li><code>exec(3)</code> the command in question</li>
          <li><code>read(2)</code> from the read-ends of the pipes</li>
          <li>append output to the respective buffer, careful to not overflow them</li>
          <li><code>wait(3)</code> for the process to terminate</li>
        </ul>

	<h4>Deliverables and Due Date</h4>
	<p>You will submit a single file named "$username-command.c" (where
           "$username" is your Stevens username).  That file will contain
           the above <code>main</code> function as provided to you as well as
           your implementation of the <code>command</code> function.</p>
        <p>
           If you prefer, you may also submit a file
           containing <em>only</em> the implementation of the
           <code>command</code> function without a
           <code>main</code>.
        </p>
        <p>
           The due date for this assignment is 16:00:00 Eastern time on 2025-11-10.
           Note that for this assignment there is no resubmission.</p>
	<p>Please attach the file to an email sent from your <code>@stevens.edu</code>
           email address to <a
           href="mailto:jschauma@stevens.edu?subject=[CS631] HW3">jschauma@stevens.edu</a>
          with a subject of "[CS631] HW3". </p>

        <hr>
        [<a href="index.html">Course Website</a>]
      </td>
    </tr>
  </table>
</BODY>
</HTML>
